{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/home/home.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 143;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 143\n// module chunks = 1","var map = {\n\t\"../pages/configuracion/configuracion.module\": [\n\t\t422,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 184;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 184\n// module chunks = 1","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, LoadingController, ModalController } from 'ionic-angular';\r\n//import { AngularFireDatabase, FirebaseListObservable, FirebaseObjectObservable } from 'angularfire2/database';\r\nimport { AngularFireDatabase, FirebaseListObservable, FirebaseObjectObservable } from \"angularfire2/database-deprecated\";\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\n\r\nimport {\r\n  GoogleMaps,\r\n  GoogleMap,\r\n  GoogleMapsEvent,\r\n  LatLng,\r\n  GoogleMapOptions,\r\n  CameraPosition,\r\n  MarkerOptions,\r\n  Marker\r\n} from '@ionic-native/google-maps';\r\n\r\n\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html'\r\n})\r\nexport class HomePage {\r\n\r\n  private watch: any;\r\n  public lat = 0;\r\n  public long = 0;\r\n  public cont = 0; //CONTADOR DE COORDENADAS ENVIADAS A LA NUBE\r\n\r\n  public selected_category_id;\r\n  public selected_unit_id;\r\n  public isTracking = 0; //ESTADO DE SEGUIMIENTO\r\n  public units_by_category_id;\r\n  public driver_by_unit_id: any = {};\r\n\r\n  public all_categories: Array<any> = [];\r\n  public all_units: Array<any> = [];\r\n  public all_drivers: Array<any> = [];\r\n\r\n  unit_tracker: FirebaseObjectObservable<any[]>;\r\n  active_units: FirebaseObjectObservable<any[]>; //LISTA DE TRANSPORTES ACTIVOS QUE SERÁ LEIDA POR LA APP\r\n  category_transport: FirebaseListObservable<any[]>;\r\n  unit_transport: FirebaseListObservable<any[]>;\r\n  driver_transport: FirebaseListObservable<any[]>;\r\n  business: FirebaseListObservable<any[]>;\r\n  tracker: FirebaseListObservable<any>;\r\n\r\n  map: GoogleMap;\r\n  mapElement: HTMLElement;\r\n  private selfmarker: Marker;\r\n  public subscription: any;\r\n\r\n  constructor(\r\n    private afDB: AngularFireDatabase,\r\n    private geolocation: Geolocation,\r\n    public loadingCtrl: LoadingController,\r\n    public modalCtrl: ModalController,\r\n    private googleMaps: GoogleMaps\r\n  ) {\r\n\r\n    let loader = this.loadingCtrl.create({\r\n      content: \"Obteniendo Datos...\",\r\n    });\r\n    loader.present().then(() => {\r\n\r\n      this.tracker = this.afDB.list(\"/geolocation_history\");\r\n      //this.driver_by_unit_id.name = \"--\";\r\n\r\n      this.category_transport = this.afDB.list('/transport_categories');\r\n      this.unit_transport = afDB.list('/transport_units');\r\n      this.driver_transport = afDB.list('/transport_drivers');\r\n\r\n      let count1 = 0;\r\n      this.category_transport.subscribe((data) => {\r\n        this.all_categories = data;\r\n        console.log(\"instituciones: \", this.all_categories);\r\n\r\n        //SI ES PRIMERA VEZ QUE OBTIENE DATOS DE INSTITUCIONES PONE INSTITUCIÓN POR DEFECTO\r\n        if (count1 == 0) {\r\n          this.selected_category_id = this.all_categories[0].id;\r\n          console.log(\"institucion seleccionada (por defecto): \", this.selected_category_id);\r\n        }\r\n        count1++;\r\n      });\r\n\r\n      let count2 = 0;\r\n      this.unit_transport.subscribe((data) => {\r\n        this.all_units = data;\r\n        console.log(\"divisiones: \", this.all_units);\r\n\r\n        //SI ES PRIMERA VEZ QUE OBTIENE DATOS DIVISIONES PONE DIVISION POR DEFECTO\r\n        if (count2 == 0 && count1 == 1) {\r\n          this.onSelectCategory();\r\n        }\r\n        count2++;\r\n      });\r\n\r\n      this.driver_transport.subscribe((data) => {\r\n        loader.dismiss();\r\n        this.all_drivers = data;\r\n      });\r\n\r\n    })\r\n\r\n  }\r\n\r\n  onSelectCategory() {\r\n\r\n    this.units_by_category_id = this.all_units.filter((item) => item.id_transport_category == this.selected_category_id);\r\n    console.log(\"categoria seleccionada: \", this.selected_category_id);\r\n    console.log(\"unidades de la categoria: \", this.units_by_category_id);\r\n    this.selected_unit_id = this.units_by_category_id[0].id;\r\n    console.log(\"unidad seleccionada: \", this.selected_unit_id);\r\n\r\n  }\r\n\r\n\r\n  onSelectUnit(key_unit) {\r\n    console.log(key_unit);\r\n    this.selected_unit_id = key_unit;\r\n  }\r\n\r\n  startGeolocation(_unit_id) {\r\n    this.cont = 0;\r\n    this.unit_tracker = this.afDB.object('/transport_units/' + this.selected_unit_id);\r\n    //CREA REGISTROS CON KEYS IDENTICAS A LA KEY DE LA UNIDAD DE TRANSPORTE\r\n    this.active_units = this.afDB.object('/transport_active_units/' + this.selected_unit_id);\r\n\r\n    this.isTracking = 1;\r\n    let fake = 0.0001000;\r\n    let options = { enableHighAccuracy: true, frequency: 5000 };\r\n    this.watch = this.geolocation.watchPosition(options)\r\n      .subscribe((data) => {\r\n        console.log(\"datito: \", data);\r\n        if(data.coords){\r\n\r\n          fake = fake + 0.0001000;\r\n          this.lat = data.coords.latitude + fake;\r\n          this.long = data.coords.longitude;\r\n          let userPosition: LatLng = new LatLng(this.lat, this.long);\r\n          let position: CameraPosition<any> = {\r\n            target: userPosition,\r\n            zoom: 15,\r\n            tilt: 0\r\n          };\r\n          this.map.moveCamera(position);\r\n\r\n          this.cont = this.cont + 1;\r\n          let date = this.timeConverter(data.timestamp);\r\n          this.tracker.push({ lat: this.lat, long: this.long, transport_unit_id: _unit_id, timestamp: data.timestamp, created_at: date });\r\n          this.unit_tracker.update({ last_latitude: this.lat, last_longitude: this.long, created_at: date, state: this.isTracking });\r\n          this.active_units.set({ last_latitude: this.lat, last_longitude: this.long, created_at: date });\r\n\r\n          console.log(data);\r\n        }\r\n\r\n      });\r\n  }\r\n\r\n  stopGeolocation() {\r\n    this.isTracking = 0;\r\n    this.lat = 0;\r\n    this.long = 0;\r\n    this.unit_tracker.update({ state: this.isTracking });\r\n    this.watch.unsubscribe(); //DEJO DE HACER GEOLOCALIZACION\r\n    this.active_units.remove(); //ELIMINO DISPOSITIVO DE LISTA DISPOSITIVOS ACTIVOS DE LA NUBE\r\n  }\r\n\r\n  timeConverter(timestamp) {\r\n    let a = new Date(timestamp);\r\n    let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n    let year = a.getFullYear();\r\n    let month = months[a.getMonth()];\r\n    let date = a.getDate();\r\n    let hour = a.getHours();\r\n    let min = a.getMinutes();\r\n    let sec = a.getSeconds();\r\n    let time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec;\r\n    return time;\r\n  }\r\n\r\n  openModal() {\r\n    let myModal = this.modalCtrl.create('ConfiguracionPage', { selected_category_id: this.selected_category_id, selected_unit_id: this.selected_unit_id } , { cssClass: 'inset-modal' });\r\n\r\n    myModal.onDidDismiss(response => {\r\n\r\n      console.log(\"respuesta del modal: \", response)\r\n      this.selected_category_id = response.selected_category_id;\r\n      this.selected_unit_id = response.selected_unit_id;\r\n      /*\r\n      if(cod_asignatura){\r\n        this.cod_asignatura = cod_asignatura;\r\n        this.cod_periodo = this.asignaturas[cod_asignatura].cod_periodo;\r\n      }*/\r\n\r\n    });\r\n\r\n    myModal.present();\r\n\r\n  }\r\n\r\n  \r\n  loadMap() {\r\n    this.mapElement = document.getElementById('map');\r\n\r\n    let mapOptions: GoogleMapOptions = {\r\n      camera: {\r\n        target: {\r\n          lat: -18.4803045,\r\n          lng: -70.2969735\r\n        },\r\n        zoom: 14,\r\n        tilt: 30\r\n      }\r\n    };\r\n\r\n    this.map = this.googleMaps.create(this.mapElement, mapOptions);\r\n\r\n    //ESPERA QUE EL MAPA ESTE LISTO ANTES DE USAR ALGUN METODO\r\n    this.map.one(GoogleMapsEvent.MAP_READY)\r\n      .then(() => {\r\n        console.log('Map is ready!');\r\n\r\n      });\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\r\nimport { ErrorHandler, NgModule } from '@angular/core';\r\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\nimport { MyApp } from './app.component';\r\nimport { HomePage } from '../pages/home/home';\r\n\r\n//import { AngularFireModule } from 'angularfire2';\r\n//import { AngularFireDatabaseModule } from 'angularfire2/database';\r\nimport { AngularFireAuthModule } from 'angularfire2/auth';\r\nimport { AngularFireDatabaseModule } from \"angularfire2/database-deprecated\";\r\nimport { AngularFireModule } from 'angularfire2';\r\nimport { GoogleMaps } from '@ionic-native/google-maps';\r\n\r\n\r\nexport const firebaseConfig = {\r\n  apiKey: \"AIzaSyAnfhMJ-bRE066SRZpLVf3KaKMUh02QaRo\",\r\n    authDomain: \"smartcity-a75b8.firebaseapp.com\",\r\n    databaseURL: \"https://smartcity-a75b8.firebaseio.com\",\r\n    projectId: \"smartcity-a75b8\",\r\n    storageBucket: \"smartcity-a75b8.appspot.com\",\r\n    messagingSenderId: \"802635265304\"\r\n};\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n    HomePage\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    IonicModule.forRoot(MyApp),\r\n    AngularFireModule.initializeApp(firebaseConfig),\r\n    AngularFireDatabaseModule\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp,\r\n    HomePage\r\n  ],\r\n  providers: [\r\n    StatusBar,\r\n    SplashScreen,\r\n    Geolocation,\r\n    GoogleMaps,\r\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\r\n  ]\r\n})\r\nexport class AppModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { HomePage } from '../pages/home/home';\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = HomePage;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}